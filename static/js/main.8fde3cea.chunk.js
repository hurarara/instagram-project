(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{178:function(e,t,a){e.exports=a.p+"static/media/instagram_logo.dcc389e5.png"},195:function(e,t,a){e.exports=a(406)},201:function(e,t,a){},321:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},405:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),o=a.n(c),s=a(36),l=(a(200),a(201),a(50)),i=a(8),u=a.n(i),m=a(46),p=a(13),f=a(5),d=a(416),E=a(47),b=a.n(E),h=a(102),v=b.a.create({baseURL:"http://localhost:8000"}),g=Object(h.b)({axios:v}),j=a(411),w=a(408),O=a(417),y=a(418),k=a(413),x=a(51);function T(e,t){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}}function S(e,t){try{window.localStorage.setItem(e,JSON.stringify(t))}catch(a){console.log(a)}}var C=a(104),N=a.n(C),P=Object(n.createContext)(),F=function(e,t){var a=t.type;if(a===A){var n=t.payload,r=Object(m.a)({},e,{jwtToken:n,isAuthenticated:!0});return Object(C.UpdateWithSideEffect)(r,(function(e,t){S("jwtToken",n)}))}if(a===L){var c=Object(m.a)({},e,{jwtToken:"",isAuthenticated:!1});return Object(C.UpdateWithSideEffect)(c,(function(e,t){S("jwtToken","")}))}return e},_=function(e){var t=e.children,a=T("jwtToken",""),n=N()(F,{jwtToken:a,isAuthenticated:a.length>0}),c=Object(f.a)(n,2),o=c[0],s=c[1];return r.a.createElement(P.Provider,{value:{store:o,dispatch:s}},t)},I=function(){return Object(n.useContext)(P)},A="APP/SET_TOKEN",L="APP/DELETE_TOKEN",U=function(e){return{type:A,payload:e}},z=a(407),J=a(101),q=a(128),W=a.n(q),B=function(e){var t=e.comment,a=t.author,n=a.username,c=a.name,o=a.avatar_url,s=t.message,l=t.created_at,i=0===c.length?n:c;return r.a.createElement(z.a,{author:i,avatar:r.a.createElement(w.a,{src:o,alt:i}),content:r.a.createElement("p",null,s),datetime:r.a.createElement(J.a,{title:W()().format(l)},r.a.createElement("span",null,W()(l).fromNow()))})},D=function(e){var t=e.post,a=I(),c=a.store.jwtToken,o=(a.dispatch,Object(n.useState)("")),s=Object(f.a)(o,2),l=s[0],i=s[1],m={Authorization:"JWT ".concat(c)},d=Object(h.a)({url:"http://localhost:8000/api/posts/".concat(t.id,"/comments/"),headers:m}),E=Object(f.a)(d,2),v=E[0],g=v.data,j=(v.loading,v.error,E[1]),w=function(){var e=Object(p.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post("http://localhost:8000/api/posts/".concat(t.id,"/comments/"),{message:l},{headers:m});case 3:e.sent,i(""),j(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("error:::"+e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",null,g&&g.map((function(e){return r.a.createElement(B,{key:e.id,comment:e})})),r.a.createElement(k.a.TextArea,{style:{marginBottom:"0.5em"},value:l,onChange:function(e){return i(e.target.value)}}),r.a.createElement(x.a,{block:!0,type:"primary",disabled:0===l.length,onClick:w},"\ub313\uae00\uc4f0\uae30"))},R=function(e){var t=e.post,a=e.handleLike,n=t.author,c=t.caption,o=t.location,s=t.photo,l=(t.tag_set,t.is_like),i=n.username,u=(n.name,n.avatar_url);return r.a.createElement("div",null,r.a.createElement(j.a,{hoverable:!0,cover:r.a.createElement("img",{src:s,alt:c}),actions:[l?r.a.createElement(O.a,{twoToneColor:"red",onClick:function(){return a({post:t,isLike:!1})}}):r.a.createElement(y.a,{onClick:function(){return a({post:t,isLike:!0})}})]},r.a.createElement(j.a.Meta,{avatar:r.a.createElement(w.a,{size:"large",icon:r.a.createElement("img",{src:u,alt:i})}),title:o,description:c,style:{marginBottom:"0.5em"}}),r.a.createElement(D,{post:t})))},H=function(){var e=I(),t=e.store.jwtToken,a=(e.dispatch,Object(n.useState)([])),c=Object(f.a)(a,2),o=c[0],s=c[1],l={Authorization:"JWT ".concat(t)},i=g({url:"/api/posts/",headers:l}),E=Object(f.a)(i,2),b=E[0],h=b.data;b.loading,b.error,E[1];Object(n.useEffect)((function(){s(h)}),[h]);var j=function(){var e=Object(p.a)(u.a.mark((function e(t){var a,n,r,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.post,n=t.isLike,r="/api/posts/".concat(a.id,"/like/"),c=n?"POST":"DELETE",e.prev=3,e.next=6,v({url:r,method:c,headers:l});case 6:o=e.sent,console.log("response:::"+o),s((function(e){return e.map((function(e){return e===a?Object(m.a)({},e,{is_like:n}):e}))})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log("error:::"+e.t0);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,!o&&r.a.createElement(d.a,{type:"warning",message:"\ud3ec\uc2a4\ud305\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),o&&o.map((function(e){return r.a.createElement(R,{key:e.id,post:e,handleLike:j})})))},K=a(24),M=a(414),V=(a(321),a(178)),G=a.n(V),Q=function(e){var t=e.children,a=e.sidebar;Object(K.a)(e,["children","sidebar"]);return r.a.createElement("div",{className:"app"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",{className:"page-title"},r.a.createElement("img",{src:G.a,alt:"logo",style:{width:"100px"}})),r.a.createElement("div",{className:"search"},r.a.createElement(k.a.Search,null)),r.a.createElement("div",{className:"topnav"},r.a.createElement(M.a,{mode:"horizontal"},r.a.createElement(M.a.Item,null,"\uba54\ub2741"),r.a.createElement(M.a.Item,null,"\uba54\ub2742"),r.a.createElement(M.a.Item,null,"\uba54\ub2743")))),r.a.createElement("div",{className:"sidebar"},a),r.a.createElement("div",{className:"contents"},t),r.a.createElement("div",{className:"footer"},"\xa9 2020. Han Won Seok"))},X=(a(324),function(e){var t=e.style;return r.a.createElement("div",{style:t},r.a.createElement(j.a,{title:"Stories",size:"small"},"Stories from people you follow will show up here."))}),Y=(a(325),a(326),function(e){var t=e.suggestionUser,a=e.onFollowUser,n=t.username,c=t.name,o=t.avatar_url,s=t.is_follow;return r.a.createElement("div",{className:"suggestion"},r.a.createElement("div",{className:"avatar"},r.a.createElement(w.a,{size:"small",icon:r.a.createElement("img",{src:o,alt:"".concat(n,"'s avatar")})})),r.a.createElement("div",{className:"username"},0===c.length?n:c),r.a.createElement("div",{className:"action"},s&&"\ud314\ub85c\uc789 \uc911",!s&&r.a.createElement(x.a,{size:"small",onClick:function(){return a(n)}},"Follow")))}),Z=function(e){var t=e.style,a=I().store.jwtToken,c={Authorization:"JWT ".concat(a)},o=g({url:"/accounts/suggestions/",headers:c}),s=Object(f.a)(o,2),l=s[0],i=l.data,u=l.loading,p=l.error,d=s[1],E=Object(n.useState)([]),b=Object(f.a)(E,2),h=b[0],w=b[1];Object(n.useEffect)((function(){w(i?i.map((function(e){return Object(m.a)({},e,{is_follow:!1})})):[])}),[i]);var O=function(e){var t={username:e},a={headers:c};v.post("/accounts/follow/",t,a).then((function(t){w((function(t){return t.map((function(t){return t.username===e?Object(m.a)({},t,{is_follow:!0}):t}))}))})).catch((function(e){console.error(e)}))};return r.a.createElement("div",{style:t},u&&r.a.createElement("div",null,"Loading ... "),p&&r.a.createElement("div",null,"\ub85c\ub529 \uc911\uc5d0 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),r.a.createElement("button",{onClick:function(){return d()}},"Reload"),r.a.createElement(j.a,{title:"Suggestions for you",size:"small"},h.map((function(e){return r.a.createElement(Y,{key:e.username,suggestionUser:e,onFollowUser:O})}))))},$=function(){var e=Object(l.f)(),t=r.a.createElement(r.a.Fragment,null,r.a.createElement(x.a,{type:"primary",block:!0,style:{marginBottom:"1rem"},onClick:function(){e.push("/posts/new")}},"\uc0c8 \ud3ec\uc2a4\ud305 \uc4f0\uae30"),r.a.createElement(X,{style:{marginBottom:"1rem"}}),r.a.createElement(Z,null));return r.a.createElement(Q,{sidebar:t},r.a.createElement(H,null))},ee=function(){return r.a.createElement("div",null,"About")},te=function(){return r.a.createElement("div",null,"accounts/profile")},ae=a(415),ne=a(409),re=a(419),ce=a(420),oe=function(e){return Object.entries(e).reduce((function(e,t){var a=Object(f.a)(t,2),n=a[0],r=a[1];return e[n]={validateStatus:"error",help:r.join(" ")},e}),{})},se=function(){var e=I().dispatch,t=Object(l.g)(),a=Object(l.f)(),c=Object(n.useState)({}),o=Object(f.a)(c,2),s=o[0],i=o[1],m=(t.state||{from:{pathname:"/"}}).from,d={wrapperCol:{offset:8,span:16}};return r.a.createElement(j.a,{title:"\ub85c\uadf8\uc778"},r.a.createElement(ne.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{onFinish:function(t){function n(){return(n=Object(p.a)(u.a.mark((function n(){var c,o,s,l,p,f;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=t.username,o=t.password,i({}),s={username:c,password:o},n.prev=3,n.next=6,v.post("/accounts/token/",s);case 6:l=n.sent,p=l.data.token,e(U(p)),ae.a.open({message:"\ub85c\uadf8\uc778 \uc131\uacf5",description:"Home\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.",icon:r.a.createElement(re.a,{style:{color:"#108ee0"}})}),a.push(m),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),n.t0.response&&(ae.a.open({message:"\ub85c\uadf8\uc778 \uc2e4\ud328",description:"\uc544\uc774\ub514/\uc554\ud638\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.",icon:r.a.createElement(ce.a,{style:{color:"#ff3333"}})}),f=n.t0.response.data,i(oe(f)));case 16:case"end":return n.stop()}}),n,null,[[3,13]])})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}}),r.a.createElement(ne.a.Item,Object.assign({label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{min:5,message:"5\uae00\uc790\uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694."}],hasFeedback:!0},s.username,s.non_field_errors),r.a.createElement(k.a,null)),r.a.createElement(ne.a.Item,Object.assign({label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},s.password),r.a.createElement(k.a.Password,null)),r.a.createElement(ne.a.Item,d,r.a.createElement(x.a,{type:"primary",htmlType:"submit"},"Submit"))))},le=function(){var e=Object(l.f)(),t=Object(n.useState)({}),a=Object(f.a)(t,2),c=a[0],o=a[1],s={wrapperCol:{offset:8,span:16}};return r.a.createElement(ne.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{onFinish:function(t){function a(){return(a=Object(p.a)(u.a.mark((function a(){var n,c,s,l;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.username,c=t.password,o({}),s={username:n,password:c},a.prev=3,a.next=6,v.post("/accounts/signup/",s);case 6:ae.a.open({message:"\ud68c\uc6d0\uac00\uc785 \uc131\uacf5",description:"\ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.",icon:r.a.createElement(re.a,{style:{color:"#108ee0"}})}),e.push("/accounts/login"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(3),a.t0.response&&(ae.a.open({message:"\ud68c\uc6d0\uac00\uc785 \uc2e4\ud328",description:"\uc544\uc774\ub514/\uc554\ud638\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.",icon:r.a.createElement(ce.a,{style:{color:"#ff3333"}})}),l=a.t0.response.data,o(Object.entries(l).reduce((function(e,t){var a=Object(f.a)(t,2),n=a[0],r=a[1];return e[n]={validateStatus:"error",help:r.join(" ")},e}),{})));case 13:case"end":return a.stop()}}),a,null,[[3,10]])})))).apply(this,arguments)}!function(){a.apply(this,arguments)}()}}),r.a.createElement(ne.a.Item,Object.assign({label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{min:5,message:"5\uae00\uc790\uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694."}],hasFeedback:!0},c.username),r.a.createElement(k.a,null)),r.a.createElement(ne.a.Item,Object.assign({label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},c.password),r.a.createElement(k.a.Password,null)),r.a.createElement(ne.a.Item,s,r.a.createElement(x.a,{type:"primary",htmlType:"submit"},"Submit")))},ie=function(e){var t=e.component,a=Object(K.a)(e,["component"]),n=I().store.isAuthenticated;return console.log("isAuthenticated:::"+n),r.a.createElement(l.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(l.a,{to:{pathname:"/accounts/login",state:{from:e.location}}})}}))},ue=function(e){var t=e.match;Object(K.a)(e,["match"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{exact:!0,path:t.url+"/profile",component:te}),r.a.createElement(l.b,{exact:!0,path:t.url+"/login",component:se}),r.a.createElement(l.b,{exact:!0,path:t.url+"/signup",component:le}))},me=a(410),pe=a(412),fe=a(421),de=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))},Ee=function(){var e=I().store.jwtToken,t=Object(l.f)(),a=Object(n.useState)([]),c=Object(f.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)({visible:!1,base64:null}),m=Object(f.a)(i,2),d=m[0],E=m[1],b=Object(n.useState)({}),h=Object(f.a)(b,2),g=h[0],j=h[1],w=function(){var a=Object(p.a)(u.a.mark((function a(n){var c,o,s,l,i,m,p,f,d;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("fielValues:::"+n),c=n.caption,o=n.location,s=n.photo.fileList,(l=new FormData).append("caption",c),l.append("location",o),s.forEach((function(e){l.append("photo",e.originFileObj)})),i={Authorization:"JWT ".concat(e)},a.prev=7,a.next=10,v.post("/api/posts/",l,{headers:i});case 10:m=a.sent,console.log("success response:::"+m),t.push("/"),a.next=18;break;case 15:a.prev=15,a.t0=a.catch(7),a.t0.response&&(p=a.t0.response,f=p.status,"string"===typeof(d=p.data)?ae.a.open({message:"\uc11c\ubc84 \uc624\ub958",description:"\uc5d0\ub7ec) ".concat(f," \uc751\ub2f5\uc744 \ubc1b\uc558\uc2b5\ub2c8\ub2e4."),icon:r.a.createElement(ce.a,{style:{color:"#ff3333"}})}):j(oe(d)));case 18:case"end":return a.stop()}}),a,null,[[7,15]])})));return function(e){return a.apply(this,arguments)}}(),O=function(){var e=Object(p.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,de(t.originFileObj);case 3:t.preview=e.sent;case 4:E({visible:!0,base64:t.url||t.preview});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={wrapperCol:{offset:8,span:16}};return r.a.createElement(ne.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{onFinish:w}),r.a.createElement(ne.a.Item,Object.assign({label:"Caption",name:"caption",rules:[{required:!0,message:"Caption\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}],hasFeedback:!0},g.caption,g.non_field_errors),r.a.createElement(k.a.TextArea,null)),r.a.createElement(ne.a.Item,Object.assign({label:"Location",name:"location",rules:[{required:!0,message:"Location \uc785\ub825\ud574\uc8fc\uc138\uc694."}],hasFeedback:!0},g.location),r.a.createElement(k.a,null)),r.a.createElement(ne.a.Item,Object.assign({label:"Photo",name:"photo",rules:[{required:!0,message:"\uc0ac\uc9c4\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}],hasFeedback:!0},g.photo),r.a.createElement(me.a,{listType:"picture-card",fileList:o,beforeUpload:function(){return!1},onChange:function(e){var t=e.fileList;s(t)},onPreview:O},o.length>0?null:r.a.createElement("div",null,r.a.createElement(fe.a,null),r.a.createElement("div",{className:"ant-upload-text"},"Upload")))),r.a.createElement(ne.a.Item,y,r.a.createElement(x.a,{type:"primary",htmlType:"submit"},"Submit")),r.a.createElement(pe.a,{visible:d.visible,footer:null,onCancel:function(){return E({visible:!1})}},r.a.createElement("img",{src:d.base64,style:{width:"100%"},alt:"Preview"})),r.a.createElement("hr",null))},be=(a(405),function(){return r.a.createElement("div",{className:"PostNew"},r.a.createElement(j.a,{title:"\uc0c8 \ud3ec\uc2a4\ud305 \uc4f0\uae30"},r.a.createElement(Ee,null)))}),he=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie,{exact:!0,path:"/",component:$}),r.a.createElement(l.b,{exact:!0,path:"/about",component:ee}),r.a.createElement(ie,{exact:!0,path:"/posts/new",component:be}),r.a.createElement(l.b,{path:"/accounts",component:ue}))};o.a.render(r.a.createElement(s.a,null,r.a.createElement(_,null,r.a.createElement(he,null))),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.8fde3cea.chunk.js.map